(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a363800a"],{"0622":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"prefectInfo"},[a("a-form-model",{ref:"ruleForm",attrs:{model:t.data,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{attrs:{"has-feedback":"",label:"商品价格",prop:"price"}},[a("a-input",{model:{value:t.data.price,callback:function(e){t.$set(t.data,"price",e)},expression:"data.price"}})],1),a("a-form-model-item",{attrs:{label:"折扣价格",prop:"price_off"}},[a("a-input",{model:{value:t.data.price_off,callback:function(e){t.$set(t.data,"price_off",e)},expression:"data.price_off"}})],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"商品库存",prop:"inventory"}},[a("a-input",{model:{value:t.data.inventory,callback:function(e){t.$set(t.data,"inventory",e)},expression:"data.inventory"}})],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"计量单位",prop:"unit"}},[a("a-input",{model:{value:t.data.unit,callback:function(e){t.$set(t.data,"unit",e)},expression:"data.unit"}})],1),a("a-form-model-item",{attrs:{label:"商品相册"}},[a("a-upload",{attrs:{"list-type":"picture-card","file-list":t.fileList},on:{preview:t.handlePreview,change:t.handleChange}},[t.fileList.length<8?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v("Upload")])],1):t._e()]),a("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1),a("a-form-model-item",{attrs:{"wrapper-col":{span:14,offset:4}}},[a("a-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.handleClick}},[t._v(" 上一步 ")]),a("a-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.submit}},[t._v(" 提交 ")])],1)],1)],1)},n=[],i=a("1da1"),s=a("5530");a("96cf"),a("d3b7"),a("d81d");function c(t){return new Promise((function(e,a){var r=new FileReader;r.readAsDataURL(t),r.onload=function(){return e(r.result)},r.onerror=function(t){return a(t)}}))}var l={props:["data"],data:function(){return{previewVisible:!1,previewImage:"",fileList:[],labelCol:{span:4},wrapperCol:{span:14},other:"",result:"",rules:{price:[{required:!0,message:"请填写商品价格",trigger:"change"}],inventory:[{required:!0,message:"请填写商品价格",trigger:"change"}],unit:[{required:!0,message:"请填写商品价格",trigger:"change"}]}}},created:function(){this.fileList=this.data.images.map((function(t,e){return{uid:"".concat(e),name:"image".concat(e,".png"),status:"done",url:t}}))},methods:{submit:function(){var t=this.fileList.map((function(t){return t.url}));this.$emit("submit",Object(s["a"])(Object(s["a"])({},this.data),{},{images:t}))},resetCate:function(){this.data.c_item=""},handleClick:function(){this.$emit("prev")},handleCancel:function(){this.previewVisible=!1},handlePreview:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.url||t.preview){a.next=4;break}return a.next=3,c(t.originFileObj);case 3:t.preview=a.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},handleChange:function(t){var e=t.fileList;this.fileList=e}}},o=l,u=(a("0c9a"),a("2877")),d=Object(u["a"])(o,r,n,!1,null,"1c60b2c1",null);e["a"]=d.exports},"0c9a":function(t,e,a){"use strict";a("9f01")},"38be":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addProduct"},[a("a-steps",{staticClass:"steps",attrs:{current:t.current}},t._l(t.steps,(function(t){return a("a-step",{key:t.title,attrs:{title:t.title}})})),1),a("div",{staticClass:"steps-content"},[0==this.current?a("basicInfo",{attrs:{data:this.dataList},on:{next:t.next}}):1==this.current?a("prefectInfo",{attrs:{data:this.dataList},on:{prev:t.prev,submit:t.addSubmit}}):t._e()],1)],1)},n=[],i=a("1da1"),s=a("5530"),c=(a("96cf"),a("b2e7")),l=a("0622"),o=a("0c6d"),u={data:function(){return{current:0,steps:[{title:"填写基本信息"},{title:"完善商品信息"}],dataList:{title:"",desc:"",category:null,c_item:[],tags:[],price:0,price_off:0,unit:"",inventory:0,images:[]}}},components:{basicInfo:c["a"],prefectInfo:l["a"]},mounted:function(){},methods:{next:function(t){this.dataList=Object(s["a"])(Object(s["a"])({},this.dataList),t),this.current+=1},prev:function(){this.current-=1},addSubmit:function(t){return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["a"])(Object(s["a"])({},t)).then((function(t){"success"===t.status&&(alert("提交成功"),console.log(t))}));case 2:case"end":return e.stop()}}),e)})))()}}},d=u,p=(a("7236"),a("2877")),f=Object(p["a"])(d,r,n,!1,null,"e0bdfa36",null);e["default"]=f.exports},7236:function(t,e,a){"use strict";a("e081")},"9f01":function(t,e,a){},b2e7:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"basicInfo"},[a("a-form-model",{ref:"ruleForm",attrs:{model:t.data,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{ref:"name",attrs:{"has-feedback":"",label:"标题",prop:"title",required:""}},[a("a-input",{on:{blur:function(){t.$refs.name.onFieldBlur()}},model:{value:t.data.title,callback:function(e){t.$set(t.data,"title",e)},expression:"data.title"}})],1),a("a-form-model-item",{ref:"desc",attrs:{"has-feedback":"",label:"商品描述",prop:"desc",required:""}},[a("a-input",{model:{value:t.data.desc,callback:function(e){t.$set(t.data,"desc",e)},expression:"data.desc"}})],1),a("a-form-model-item",{attrs:{label:"商品类别",prop:"category",required:""}},[a("a-select",{attrs:{placeholder:"请选择子类目"},on:{change:t.changeCategory},model:{value:t.data.category,callback:function(e){t.$set(t.data,"category",e)},expression:"data.category"}},t._l(t.cateData,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1),a("a-select",{attrs:{placeholder:"请选择子类目"},model:{value:t.data.c_item,callback:function(e){t.$set(t.data,"c_item",e)},expression:"data.c_item"}},t._l(t.categoryItems,(function(e){return a("a-select-option",{key:e,attrs:{value:e}},[t._v(" "+t._s(e)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:"商品标签",prop:"tags"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{mode:"tags",placeholder:"标签"},model:{value:t.data.tags,callback:function(e){t.$set(t.data,"tags",e)},expression:"data.tags"}},t._l(t.data.tags,(function(e,r){return a("a-select-option",{key:r,attrs:{value:e}},[t._v(" "+t._s(e)+" ")])})),1)],1),a("a-form-model-item",{attrs:{"wrapper-col":{span:14,offset:4}}},[a("a-button",{attrs:{type:"primary"},on:{click:t.handleClick}},[t._v(" 下一步 ")])],1)],1)],1)},n=[],i=a("0c6d"),s={props:["data"],data:function(){return{labelCol:{span:4},wrapperCol:{span:14},other:"",result:"",rules:{},cateData:[],categoryItems:[]}},created:function(){var t=this;Object(i["d"])().then((function(e){t.cateData=e.data.data,console.log(e)}))},methods:{changeCategory:function(t){for(var e=0;e<this.cateData.length;e+=1)this.cateData[e].id===t&&(this.categoryItems=this.cateData[e].c_items)},handleClick:function(){var t=this;this.$refs.ruleForm.validate((function(e){return console.log(e),e?(t.$emit("next",t.data),!0):(alert("填写有误!!"),!1)}))}}},c=s,l=a("2877"),o=Object(l["a"])(c,r,n,!1,null,null,null);e["a"]=o.exports},e081:function(t,e,a){}}]);
//# sourceMappingURL=chunk-a363800a.824b835b.js.map